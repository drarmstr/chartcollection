(function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},i={}.hasOwnProperty,t=function(n,t){function u(){this.constructor=n}for(var r in t)i.call(t,r)&&(n[r]=t[r]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n},r=[].slice;c3.Plot.Layer=function(){function t(t){this.max_y=n(this.max_y,this);this.min_y=n(this.min_y,this);this.max_x=n(this.max_x,this);this.min_x=n(this.min_x,this);this.scale=n(this.scale,this);this.redraw=n(this.redraw,this);this.zoom=n(this.zoom,this);this.style=n(this.style,this);this.draw=n(this.draw,this);this.update=n(this.update,this);this.size=n(this.size,this);this.init=n(this.init,this);c3.util.extend(this,new c3.Dispatch);c3.util.extend(this,t);this.uid=c3.Plot.Layer._next_uid++}return t.version=.1,c3.Layer=t,t.prototype.type="layer",t._next_uid=0,t.prototype.data=void 0,t.prototype.name=void 0,t.prototype["class"]=void 0,t.prototype.static_data=!1,t.prototype.h=void 0,t.prototype.v=void 0,t.prototype.x=void 0,t.prototype.y=void 0,t.prototype.options=void 0,t.prototype.handlers=void 0,t.prototype.init=function(n,t){var r,f,i,u;if(this.chart=n,this.g=t,this.trigger("render_start"),this.data==null&&(this.data=this.chart.data),this.h==null&&(this.h=this.chart.h),this.v==null&&(this.v=this.chart.v),this.x==null&&(this.x=this.chart.x),this.y==null&&(this.y=this.chart.y),this["class"]!=null&&this.g.classed(this["class"],!0),this.handlers!=null){u=this.handlers;for(r in u){f=u[r];this.on(r,f)}}for(this.content=c3.select(this.g),i=Object.getPrototypeOf(this);i;)i.type!=null&&this.g.classed(i.type,!0),i=Object.getPrototypeOf(i);return typeof this._init=="function"&&this._init(),this.trigger("render")},t.prototype.size=function(n,t){return this.width=n,this.height=t,this.trigger("resize_start"),c3.d3.set_range(this.h,[0,this.width]),c3.d3.set_range(this.v,[this.height,0]),typeof this._size=="function"&&this._size(),this.trigger("resize")},t.prototype.update=function(n){if(this.chart==null)throw Error("Attempt to redraw uninitialized plot layer, please use render() when modifying set of layers.");return this.trigger("redraw_start",n),typeof this._update=="function"?this._update(n):void 0},t.prototype.draw=function(n){if(!this.static_data||n!=="redraw")return n==="resize"&&this.trigger("redraw_start",n),typeof this._draw=="function"&&this._draw(n),this.trigger("redraw",n)},t.prototype.style=function(n){return this.trigger("restyle_start",n),typeof this._style=="function"&&this._style(n),this.trigger("restyle",n),this.rendered||this.trigger("rendered"),this},t.prototype.zoom=function(){return typeof this.draw=="function"&&this.draw("zoom"),typeof this.style=="function"?this.style(!0):void 0},t.prototype.redraw=function(n){return n==null&&(n="redraw"),this.update(n),this.draw(n),this.style(!0),this},t.prototype.restyle=t.prototype.style,t.prototype.scale=function(){var n,i,t;if(i=!1,this.h_domain!=null){if(this.h===this.chart.h)throw Error("Layer cannot scale shared h scale, please define just h or both h and h_domain for layers");n=typeof this.h_domain=="function"?this.h_domain.call(this):this.h_domain;n[0]==="auto"&&(n[0]=this.min_x());n[1]==="auto"&&(n[1]=this.max_x());(n[0]!==this.h.domain()[0]||n[1]!==this.h.domain()[1])&&(this.h.domain(n),i=!0)}if(this.v_domain!=null){if(this.v===this.chart.v)throw Error("Layer cannot scale shared v scale, please define just v or both v and v_domain for layers");t=typeof this.v_domain=="function"?this.v_domain.call(this):this.v_domain;t[0]==="auto"&&(t[0]=this.min_y());t[1]==="auto"&&(t[1]=this.max_y());(t[0]!==this.v.domain()[0]||t[1]!==this.v.domain()[1])&&(this.v.domain(t),i=!0)}return i},t.prototype.min_x=function(){return d3.min(this.data,this.x)},t.prototype.max_x=function(){return d3.max(this.data,this.x)},t.prototype.min_y=function(){return d3.min(this.data,this.y)},t.prototype.max_y=function(){return d3.max(this.data,this.y)},t}();c3.Plot.Layer.Stackable=function(i){function r(){return this.max_y=n(this.max_y,this),this.min_y=n(this.min_y,this),this.max_x=n(this.max_x,this),this.min_x=n(this.min_x,this),this._style=n(this._style,this),this._update=n(this._update,this),this._stack=n(this._stack,this),r.__super__.constructor.apply(this,arguments)}return t(r,i),r.version=.2,r.prototype.type="stackable",r.prototype.stack_options=void 0,r.prototype.stacks=void 0,r.prototype.safe=!0,r.prototype._stack=function(){var e,i,t,at,r,b,n,k,u,o,s,vt,f,h,yt,c,d,l,g,pt,wt,bt,kt,dt,gt,ni,ti,ii,ri,a,nt,v,y,p,w,tt,it,ui,rt,ut,fi,ei,ft,oi,et,ot,st,ht,ct,lt;if(this.stack_options||this.stacks!=null){for(this.stacks==null&&(this.stacks=[]),h={},e=function(n){return function(t,i,r){var u,f,e;return u=n.x(i,r),h[u]=u,t.y=function(){var n;if((e=(n=t.y)!=null?n:this.y)!=null)return e;throw Error("Y accessor must be defined in stack, layer, or chart");}.call(n),f=t.y(i,r,t),t.values.push({x:u,y:f,datum:i})}}(this),tt=this.stacks,c=0,pt=tt.length;c<pt;c++)if(n=tt[c],n.name==null&&(n.name=(it=this.stack_options)!=null?typeof it.name=="function"?it.name(n.key):void 0:void 0),n.values=[],n.data!=null)for(ft=n.data,t=d=0,wt=ft.length;d<wt;t=++d)i=ft[t],e(n,i,t);if(this.current_data.length)if(((oi=this.stack_options)!=null?oi.key:void 0)!=null){for(u={},et=this.stacks,l=0,bt=et.length;l<bt;l++){if(n=et[l],u[n.key]!=null)throw Error("Stacks provided with duplicate keys: "+n.key);u[n.key]=n}for(ot=this.current_data,t=g=0,kt=ot.length;g<kt;t=++g)i=ot[t],r=this.stack_options.key(i),u[r]!=null?n=u[r]:this.stacks.push(n=u[r]={key:r,name:typeof(yt=this.stack_options).name=="function"?yt.name(r):void 0,current_data:[],values:[]}),e(n,i,t)}else if(this.stacks!=null)for(st=this.stacks,a=0,dt=st.length;a<dt;a++)for(n=st[a],ht=this.current_data,t=nt=0,gt=ht.length;nt<gt;t=++nt)i=ht[t],e(n,i,t);else throw Error("Either stacks or stack_options.key must be defined to create the set of stacks.");if(this.safe){for(this.h.range()[0]===this.h.range()[1]&&this.h.range([0,1]),f=c3.array.sort_up(function(){var n=[];for(at in h)vt=h[at],n.push(vt);return n}(),this.h),ct=this.stacks,v=0,ni=ct.length;v<ni;v++)n=ct[v],c3.array.sort_up(n.values,function(n){return function(t){return n.h(t.x)}}(this));for(t=0;t<f.length;){for(s=0,lt=this.stacks,y=0,ti=lt.length;y<ti;y++)if(n=lt[y],k=this.h((ui=n.values[t])!=null?ui.x:void 0),b=this.h(f[t]),k!==b){if(k<b)if(this.h.domain()[0]===this.h.domain()[1])throw Error("Did you intend for an h scale with 0 domain?  Duplicate X values, invalid stacking, or bad h scale");else throw Error("Multiple data elements with the same x value in the same stack, or invalid stacking");n.values.splice(t,0,{x:f[t],y:0,datum:null});s++}else n.values[t].y==null&&(n.values[t].y=0,s++);if(s===this.stacks.length){for(rt=this.stacks,p=0,ii=rt.length;p<ii;p++)n=rt[p],n.values.splice(t,1);f.splice(t,1);t--}t++}}for(ut=this.stacks,w=0,ri=ut.length;w<ri;w++)n=ut[w],n.current_data=n.values.map(function(n){return n.datum});return o=d3.layout.stack().values(function(n){return n.values}),((fi=this.stack_options)!=null?fi.offset:void 0)!=null&&o.offset(this.stack_options.offset),((ei=this.stack_options)!=null?ei.order:void 0)!=null&&o.order(this.stack_options.order),o(this.stacks)}},r.prototype._update=function(){var i,n,r,t,u,f,e,o;return this.current_data=this.safe?this.data!=null?this.y!=null&&this.stacks==null&&this.stack_options==null?(t=function(){var t,f,r,u;for(r=this.data,u=[],n=t=0,f=r.length;t<f;n=++t)i=r[n],u.push({x:this.x(i,n),y:this.y(i,n),datum:i});return u}.call(this),c3.array.sort_up(t,function(n){return function(t){return n.h(t.x)}}(this)),function(){var n,u,i;for(i=[],n=0,u=t.length;n<u;n++)r=t[n],r.x!=null&&r.y!=null&&i.push(r.datum);return i}()):(t=function(){var t,f,r,u;for(r=this.data,u=[],n=t=0,f=r.length;t<f;n=++t)i=r[n],u.push({x:this.x(i,n),datum:i});return u}.call(this),this.stacks!=null||this.stack_options!=null?c3.array.sort_up(t,function(n){return function(t){return n.h(t.x)}}(this)):void 0,function(){var n,u,i;for(i=[],n=0,u=t.length;n<u;n++)r=t[n],r.x!=null&&i.push(r.datum);return i}()):void 0:this.data,this._stack(),this.groups=this.content.select("g.stack").bind((f=this.stacks)!=null?f:[null],((e=this.stacks)!=null?(o=e[0])!=null?o.key:void 0:void 0)==null?null:function(n){return n.key}).options(this.stack_options,((u=this.stacks)!=null?u.some(function(n){return n.options!=null}):void 0)?function(n){return n.options}:void 0).update()},r.prototype._style=function(n){var t;if((t=this.groups)!=null)return t.style(n)},r.prototype.min_x=function(){var n;return this.stacks==null?r.__super__.min_x.apply(this,arguments):d3.min((n=this.stacks[0])!=null?n.values:void 0,function(n){return n.x})},r.prototype.max_x=function(){var n;return this.stacks==null?r.__super__.max_x.apply(this,arguments):d3.max((n=this.stacks[0])!=null?n.values:void 0,function(n){return n.x})},r.prototype.min_y=function(){return this.stacks==null?r.__super__.min_y.apply(this,arguments):0},r.prototype.max_y=function(){var n;return this.stacks==null?r.__super__.max_y.apply(this,arguments):d3.max(function(){var t,i,u,r;for(r=[],n=t=0,i=((u=this.stacks[0])!=null?u.values.length:void 0)-1;0<=i?t<=i:t>=i;n=0<=i?++t:--t)r.push(d3.sum(this.stacks,function(t){return t.values[n].y}));return r}.call(this))},r}(c3.Plot.Layer);c3.Plot.Layer.Stackable.Stack=function(){function n(n){c3.util.extend(this,n)}return n.version=.1,n.prototype.key=void 0,n.prototype.y=void 0,n.prototype.data=void 0,n.prototype.name=void 0,n.prototype.options=void 0,n}();c3.Plot.Layer.Path=function(i){function r(){return this.max_x=n(this.max_x,this),this.min_x=n(this.min_x,this),this._style=n(this._style,this),this._draw=n(this._draw,this),this._update=n(this._update,this),this._init=n(this._init,this),r.__super__.constructor.apply(this,arguments)}return t(r,i),r.version=.2,r.prototype.type="path",r.prototype.path_generator_factory=void 0,r.prototype.interpolate=void 0,r.prototype.tension=void 0,r.prototype.defined=void 0,r.prototype.r=void 0,r.prototype.a=void 0,r.prototype.path_options=void 0,r.prototype.circle_options=void 0,r.prototype.label_options=void 0,r.prototype._init=function(){if(this.path_generator_factory==null)throw Error("path_generator_factory must be defined for a path layer");return this.path_generator=this.path_generator_factory()},r.prototype._update=function(n){if(n!=="zoom"&&(r.__super__._update.apply(this,arguments),this.paths=this.groups.inherit("path.scaled").options(this.path_options),(this.r!=null||this.a!=null)&&(this.circles=this.groups.select("circle").options(this.circle_options).animate(n==="redraw").bind(this.stacks!=null?function(n){return n.current_data}:this.current_data).update()),this.label_options!=null))return this.labels=this.groups.select("text").options(this.label_options).animate(n==="redraw").bind(this.stacks!=null?function(n){return n.current_data}:this.current_data).update()},r.prototype._draw=function(n){var t,i,r,u;return n!=="zoom"&&(this.interpolate!=null&&this.path_generator.interpolate(this.interpolate),this.tension!=null&&this.path_generator.tension(this.tension),this.defined!=null&&this.path_generator.defined(this.defined),t=(i=this.chart.orig_h)!=null?i:this.h,this.paths.animate(n==="redraw").position({d:this.stacks!=null?function(n){return function(i,r){var u;return typeof(u=n.path_generator.x(function(n,r){return t(i.values[r].x)}).y(function(t,r){return n.v(i.values[r].y0+i.values[r].y)})).y0=="function"&&u.y0(n.baseline!=null&&!r?function(t,i){return n.v(c3.functor(n.baseline)(t,i))}:function(t,r){return n.v(i.values[r].y0)}),n.path_generator(i.current_data)}}(this):function(n){return function(){var i;return typeof(i=n.path_generator.x(function(i,r){return t(n.x(i,r))}).y(function(t,i){return n.v(n.y(t,i))})).y0=="function"&&i.y0(n.baseline!=null?function(t,i){return n.v(c3.functor(n.baseline)(t,i))}:n.height),n.path_generator(n.current_data)}}(this)})),(r=this.circles)!=null&&r.animate(n==="redraw").position({cx:function(n){return function(t,i,r){return n.h(n.x(t,i,r))}}(this),cy:this.stacks!=null?function(n){return function(t,i,r){var u;return u=n.stacks[r].values[i],n.v(u.y+u.y0)}}(this):function(n){return function(t,i){return n.v(n.y(t,i))}}(this),r:this.a==null?this.r:typeof this.a=="function"?function(n){return function(t,i,r){return Math.sqrt(n.a(t,i,r)/Math.PI)}}(this):Math.sqrt(this.a/Math.PI)}),(u=this.labels)!=null?u.animate(n==="redraw").position({transform:function(n){return function(t,i,r){return"translate("+n.h(n.x(t,i,r))+","+n.v(n.y(t,i,r))+")"}}(this)}):void 0},r.prototype._style=function(n){var t,i;return r.__super__._style.apply(this,arguments),(t=this.circles)!=null&&t.style(n),(i=this.labels)!=null?i.style(n):void 0},r.prototype.min_x=function(){var n,t;if(this.stacks==null){if(this.data.length)return this.x(this.data[0])}else return(n=this.stacks[0])!=null?(t=n.values[0])!=null?t.x:void 0:void 0},r.prototype.max_x=function(){var n,t;if(this.stacks==null){if(this.data.length)return this.x(this.data.slice(-1)[0])}else return(n=this.stacks[0])!=null?(t=n.values.slice(-1)[0])!=null?t.x:void 0:void 0},r}(c3.Plot.Layer.Stackable);c3.Plot.Layer.Line=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.type="line",i.prototype.path_generator_factory=d3.svg.line,i}(c3.Plot.Layer.Path);c3.Plot.Layer.Area=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.type="area",i.prototype.path_generator_factory=d3.svg.area,i.prototype.baseline=void 0,i}(c3.Plot.Layer.Path);c3.Plot.Layer.Bar=function(i){function r(){return this._style=n(this._style,this),this._draw=n(this._draw,this),this._update=n(this._update,this),r.__super__.constructor.apply(this,arguments)}return t(r,i),r.version=.2,r.prototype.type="bar",r.prototype.key=void 0,r.prototype.bar_width="50%",r.prototype.rect_options=void 0,r.prototype._update=function(){return r.__super__._update.apply(this,arguments),this.rects=this.groups.select("rect").options(this.rect_options).animate("origin is redraw").bind(this.stacks!=null?function(n){return n.current_data}:this.current_data,this.key).update()},r.prototype._draw=function(n){var r,i,t,e,o,f,u,s,h;if(e=this.v(0),typeof this.bar_width=="function")t=this.bar_width,i=function(){return t.apply(null,arguments)/2};else if(t=+this.bar_width,isNaN(t))if((typeof(h=this.bar_width).charAt=="function"?h.charAt(this.bar_width.length-1):void 0)==="%"){if(r=+this.bar_width.slice(0,-1)/100,isNaN(r))throw"Invalid bar_width percentage "+this.bar_width.slice(0,-1);this.h.rangeBands!=null?(this.h.rangeBands(this.h.rangeExtent(),1-r,1-r),t=this.h.rangeBand(),i=0):(t=this.stacks!=null?function(n){return function(t,i,u){var s,e,h,f,o,c,l;return f=n.stacks[u].values,e=n.h(f[i].x),s=n.h(i?f[i-1].x:((c=n.chart.orig_h)!=null?c:n.h).domain()[0]),h=n.h(i===f.length-1?((l=n.chart.orig_h)!=null?l:n.h).domain()[1]:f[i+1].x),o=Math.min(e-s,h-e)*r,o>=0?o:0}}(this):function(n){return function(t,i){var e,u,o,f,s,h;return u=n.h(n.x(t,i)),e=n.h(i?n.x(n.current_data[i-1],i-1):((s=n.chart.orig_h)!=null?s:n.h).domain()[0]),o=n.h(i===n.current_data.length-1?((h=n.chart.orig_h)!=null?h:n.h).domain()[1]:n.x(n.current_data[i+1],i+1)),f=Math.min(u-e,o-u)*r,f>=0?f:0}}(this),i=function(){return t.apply(null,arguments)/2})}else throw"Invalid bar_width "+this.bar_width;else typeof(s=this.h).rangeBands=="function"&&s.rangeBands(this.h.rangeExtent(),1,.5),i=t/2;return this.stacks!=null?(f=function(n){return function(t,i,r){return n.h(n.stacks[r].values[i].x)}}(this),u=function(n){return function(t,i,r){return n.v(n.stacks[r].values[i].y0+n.stacks[r].values[i].y)}}(this),o=function(n){return function(t,i,r){return e-n.v(n.stacks[r].values[i].y)}}(this)):(f=function(n){return function(t,i){return n.h(n.x(t,i))}}(this),u=function(n){return function(t,i){return u=n.y(t,i),u>0?n.v(u):e}}(this),o=function(n){return function(t,i){return Math.abs(e-n.v(n.y(t,i)))}}(this)),this.rects.animate(n==="redraw").position({x:i?typeof i!="function"?function(){return f.apply(null,arguments)-i}:function(){return f.apply(null,arguments)-i.apply(null,arguments)}:f,y:u,height:o,width:t})},r.prototype._style=function(n){return r.__super__._style.apply(this,arguments),this.rects.style(n)},r}(c3.Plot.Layer.Stackable);c3.Plot.Layer.Line.Straight=function(i){function r(){return this._style=n(this._style,this),this._draw=n(this._draw,this),this._update=n(this._update,this),this._size=n(this._size,this),this._init=n(this._init,this),r.__super__.constructor.apply(this,arguments)}return t(r,i),r.version=.1,r.prototype.type="straight",r.prototype.key=void 0,r.prototype.value=void 0,r.prototype.filter=void 0,r.prototype.draggable=!1,r.prototype.vector_options=void 0,r.prototype.line_options=void 0,r.prototype.label_options=void 0,r.prototype._init=function(){var t,n;if(this.value==null&&(this.value=function(n){return n}),this.draggable){n=this;this.dragger=d3.behavior.drag();t=void 0;this.dragger.on("dragstart",function(n){return function(t,i){return d3.event.sourceEvent.stopPropagation(),n.trigger("dragstart",t,i)}}(this));this.dragger.on("drag",function(i,r){var u,f;return u=((f=n.chart.orig_h)!=null?f:n.scale).domain(),t=Math.min(Math.max(n.scale.invert(d3.event.y),u[0]),u[1]),d3.select(this).attr("transform","translate(0,"+n.scale(t)+")"),n.trigger("drag",t,i,r)});return this.dragger.on("dragend",function(n){return function(i,r){return n.trigger("dragend",t,i,r)}}(this))}},r.prototype._size=function(){var n,t,i,r,u,f;return(n=this.lines)!=null&&(t=n.all)!=null&&t.attr("x2",this.line_length),(i=this.grab_lines)!=null&&(r=i.all)!=null&&r.attr("x2",this.line_length),(u=this.labels)!=null?(f=u.all)!=null?f.attr("x",this.label_options.alignment==="right"||this.label_options.alignment==="top"?this.width:0):void 0:void 0},r.prototype._update=function(n){var i,t,r,u;return this.current_data=this.filter!=null?function(){var n,f,r,u;for(r=this.data,u=[],t=n=0,f=r.length;n<f;t=++n)i=r[t],this.filter(i,t)&&u.push(i);return u}.call(this):this.data,this.vectors=this.content.select("g.vector").options(this.vector_options).animate(n==="redraw").bind(this.current_data,this.key).update(),this.lines=this.vectors.inherit("line").options(this.line_options).update(),this.label_options!=null&&((r=this.label_options).dx==null&&(r.dx="0.25em"),(u=this.label_options).dy==null&&(u.dy="-0.25em"),this.labels=this.vectors.inherit("text").options(this.label_options).update()),this.draggable?(this.vectors["new"].call(this.dragger),this.grab_lines=this.vectors.inherit("line.grab")):void 0},r.prototype._draw=function(n){var t,i;return this.vectors.animate(n==="redraw").position({transform:function(n){return function(t,i){return"translate(0,"+n.scale(n.value(t,i))+")"}}(this)}),this.lines["new"].attr("x2",this.line_length),(i=this.grab_lines)!=null&&i["new"].attr("x2",this.line_length),this.labels!=null?(t=this.label_options.alignment==="right"||this.label_options.alignment==="top",this.g.style("text-anchor",t?"end":"start"),this.labels.position({dx:t?"-"+this.label_options.dx:this.label_options.dx,dy:this.label_options.dy,x:t?this.line_length:0})):void 0},r.prototype._style=function(n){var t;return this.g.classed("draggable",this.draggable),this.vectors.style(n),this.lines.style(n),(t=this.labels)!=null?typeof t.style=="function"?t.style(n):void 0:void 0},r}(c3.Plot.Layer);c3.Plot.Layer.Line.Horizontal=function(i){function r(){return this._size=n(this._size,this),this._init=n(this._init,this),r.__super__.constructor.apply(this,arguments)}return t(r,i),r.prototype.type="horizontal",r.prototype._init=function(){return typeof label_options!="undefined"&&label_options!==null&&label_options.alignment==null&&(label_options.alignment="left"),r.__super__._init.apply(this,arguments),this.scale=this.v},r.prototype._size=function(){return this.line_length=this.width,r.__super__._size.apply(this,arguments)},r}(c3.Plot.Layer.Line.Straight);c3.Plot.Layer.Line.Vertical=function(i){function r(){return this._size=n(this._size,this),this._init=n(this._init,this),r.__super__.constructor.apply(this,arguments)}return t(r,i),r.prototype.type="vertical",r.prototype._init=function(){return typeof label_options!="undefined"&&label_options!==null&&label_options.alignment==null&&(label_options.alignment="top"),r.__super__._init.apply(this,arguments),this.scale=this.h},r.prototype._size=function(){return this.g.attr({transform:"rotate(-90) translate("+-this.height+",0)"}),this.line_length=this.height,r.__super__._size.apply(this,arguments)},r}(c3.Plot.Layer.Line.Straight);c3.Plot.Layer.Region=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.type="region",i}(c3.Plot.Layer);c3.Plot.Layer.Scatter=function(i){function r(){return this._style=n(this._style,this),this._draw=n(this._draw,this),this._update=n(this._update,this),this._init=n(this._init,this),r.__super__.constructor.apply(this,arguments)}return t(r,i),r.version=.1,r.prototype.type="scatter",r.prototype.key=void 0,r.prototype.value=void 0,r.prototype.r=1,r.prototype.a=void 0,r.prototype.safe=!0,r.prototype.filter=void 0,r.prototype.limit_elements=void 0,r.prototype.point_options=void 0,r.prototype.circle_options=void 0,r.prototype.label_options=void 0,r.prototype._init=function(){if(this.x==null)throw Error("x must be defined for a scatter plot layer");if(this.y==null)throw Error("y must be defined for a scatter plot layer");if(this.h==null)throw Error("h must be defined for a scatter plot layer");if(this.v==null)throw Error("v must be defined for a scatter plot layer");},r.prototype._update=function(n){var t,i;if(!this.data)throw Error("Data must be defined for scatter layer.");return this.current_data=this.filter!=null&&this.key!=null?function(){var n,f,r,u;for(r=this.data,u=[],i=n=0,f=r.length;n<f;i=++n)t=r[i],this.filter(t,i)&&u.push(t);return u}.call(this):this.data,this.safe&&(this.current_data=function(){var n,u,i,r;for(i=this.current_data,r=[],n=0,u=i.length;n<u;n++)t=i[n],this.x(t)!=null&&this.y(t)!=null&&(this.a==null||typeof this.a!="function"||this.a(t)!=null)&&(typeof this.r!="function"||this.r(t)!=null)&&r.push(t);return r}.call(this)),this.limit_elements!=null&&(this.value!=null?(this.current_data=this.current_data.slice(0),c3.array.sort_up(this.current_data,function(n){return function(t){return-n.value(t)}}(this)),this.current_data=this.current_data.slice(0,+this.limit_elements+1||9e9)):this.current_data=this.current_data.slice(0,+this.limit_elements+1||9e9)),this.points=this.content.select("g.point").options(this.point_options).animate(n==="redraw").bind(this.current_data,this.key).update(),this.filter!=null&&this.key==null&&this.points.all.attr("display",function(n){return function(t,i){if(!n.filter(t,i))return"none"}}(this)),this.circles=this.points.inherit("circle").options(this.circle_options).animate(n==="redraw").update(),this.label_options!=null?this.labels=this.points.inherit("text").options(this.label_options).update():void 0},r.prototype._draw=function(n){return this.points.animate(n==="redraw").position({transform:function(n){return function(t,i){return"translate("+n.h(n.x(t,i))+","+n.v(n.y(t,i))+")"}}(this)}),this.circles.animate(n==="redraw").position({r:this.a==null?this.r:typeof this.a=="function"?function(n){return function(t,i){return Math.sqrt(n.a(t,i)/Math.PI)}}(this):Math.sqrt(this.a/Math.PI)})},r.prototype._style=function(n){var t;return this.points.style(n),this.circles.style(n),(t=this.labels)!=null?t.style(n):void 0},r}(c3.Plot.Layer);c3.Plot.Layer.Swimlane=function(i){function u(){return this._style=n(this._style,this),this._draw=n(this._draw,this),this._update=n(this._update,this),this._size=n(this._size,this),this._init=n(this._init,this),u.__super__.constructor.apply(this,arguments)}return t(u,i),u.prototype.type="swimlane",u.prototype.dy=void 0,u.prototype.hover=void 0,u.prototype.lane_options=void 0,u.prototype._init=function(){var i,n,t;if(this.lane_options!=null&&(this.lanes=this.content.select("rect.lane",":first-child").options(this.lane_options)),this.hover!=null){i=d3.select(this.chart.anchor);this.tip=c3.select(i,"div.c3.hover").singleton();n=this;t=function(){var i,f,e,t,o,u;return u=d3.mouse(this),f=u[0],e=u[1],t=Math.floor(n._v.invert(e)),t=Math.min(t,Math.max(n.v.domain()[0],n.v.domain()[1]-1)),o=n.h.invert(f),i=c3.functor(n.hover).apply(null,r.call(n._hover_datum(o,t)).concat([t])),i?(n.tip.all.html(i),n.tip.all.style({display:"block",left:d3.event.clientX+"px",top:d3.event.clientY+"px"})):n.tip.all.style("display","none")};this.chart.content.all.on("mouseleave.hover",function(){return function(){return n.tip.all.style("display","none")}}(this));this.chart.content.all.on("mousedown.hover",function(t){return function(){n.tip.all.style("display","none");return t.chart.content.all.on("mousemove.hover",null)}}(this));this.chart.content.all.on("mouseup.hover",function(n){return function(){return n.chart.content.all.on("mousemove.hover",t)}}(this));this.chart.content.all.on("mouseenter.hover",function(n){return function(){if(!d3.event.buttons)return n.chart.content.all.on("mousemove.hover",t)}}(this));return this.chart.content.all.on("mousemove.hover",t)}},u.prototype._size=function(){return this.y==null?this.dy=this.height:this.dy!=null?this.dy:this.dy=Math.round(this.height/Math.abs(this.v.domain()[1]-this.v.domain()[0]))},u.prototype._update=function(){var i,n,t;return this.x=c3.functor(this.x),this.dx=c3.functor(this.dx),(i=this.lanes)!=null&&i.bind(function(){t=[];for(var i=n=this.v.domain()[0],r=this.v.domain()[1];n<=r?i<r:i>r;n<=r?i++:i--)t.push(i);return t}.apply(this)).update(),this.y!=null?this.chart.size(null,this.dy*Math.abs(this.v.domain()[1]-this.v.domain()[0])+this.chart.margins.top+this.chart.margins.bottom):void 0},u.prototype._draw=function(n){var t;return this._v=this.v.copy(),c3.d3.set_range(this._v,[0,this.height]),n==="resize"||n==="render"?(t=this.lanes)!=null?t.position({y:function(n){return function(t){return n._v(t+(n.invert_y?1:0))}}(this),width:this.chart.orig_h.range()[1],height:this.dy}):void 0:void 0},u.prototype._style=function(){var n;if((n=this.lanes)!=null)return n.style()},u}(c3.Plot.Layer);c3.Plot.Layer.Swimlane.Segment=function(i){function r(){return this._style=n(this._style,this),this._draw=n(this._draw,this),this._update=n(this._update,this),this._hover_datum=n(this._hover_datum,this),this._init=n(this._init,this),r.__super__.constructor.apply(this,arguments)}var u;return t(r,i),r.version=.1,r.prototype.type="segment",r.prototype.dx=null,r.prototype.key=void 0,r.prototype.filter=void 0,r.prototype.value=void 0,r.prototype.limit_elements=void 0,r.prototype.rect_options=void 0,r.prototype.label_options=void 0,u=!1,r.prototype._init=function(){var n;return r.__super__._init.apply(this,arguments),this.g.classed("segment",!0),u&&(this.scaled_g=this.g.append("g").attr("class","scaled")),this.rects_group=c3.select((n=this.scaled_g)!=null?n:this.g,"g.segments").singleton(),this.label_options!=null?this.labels_clip=c3.select(this.g,"g.labels").singleton().select("svg"):void 0},r.prototype._hover_datum=function(n,t){var i,r,e,u,o,f,s;for(e=this.h.invert(this.h(n)+1),f=this.current_data,r=u=0,o=f.length;u<o;r=++u)if(i=f[r],(this.y==null||this.y(i)===t)&&(s=this.x(i))<=e&&n<=s+this.dx(i))break;return r===this.current_data.length?[null,null]:[i,r]},r.prototype._update=function(){var t,n,i;return r.__super__._update.apply(this,arguments),this.current_data=this.filter==null?this.data:function(){var i,f,r,u;for(r=this.data,u=[],n=i=0,f=r.length;i<f;n=++i)t=r[n],this.filter(t,n)&&u.push(t);return u}.call(this),this.limit_elements!=null?(this.filter==null&&(this.current_data=this.current_data.slice(0)),c3.array.sort_down(this.current_data,(i=this.value)!=null?i:this.dx)):void 0},r.prototype._draw=function(n){var p,f,t,s,h,w,l,a,i,e,o,c,b,v,y,k;for(r.__super__._draw.apply(this,arguments),v=this.h.domain(),l=v[0],a=v[1],w=(a-l)/(this.h.range()[1]-this.h.range()[0]||1)/2,f=[],y=this.current_data,c=0,b=y.length;c<b;c++)if(t=y[c],(e=this.x(t))<a&&e+(s=this.dx(t))>l){if(s<w)if(this.limit_elements!=null)break;else continue;if(f.push(t),f.length===this.limit_elements)break}return this.rects=this.rects_group.select("rect.segment").options(this.rect_options).bind(f,this.key).update(),h=this.scaled_g!=null?(k=this.chart.orig_h)!=null?k:this.h:this.h,o=h(0),(n==="resize"?this.rects.all:this.rects["new"]).attr("height",this.dy),(!u||this.key==null||n==="resize"||n==="redraw"&&this instanceof c3.Plot.Layer.Swimlane.Flamechart?this.rects.all:this.rects["new"]).attr({x:function(n){return function(t){return h(n.x(t))}}(this),width:function(n){return function(t){return h(n.dx(t))-o}}(this),y:this.y==null?0:function(n){return function(t){return n._v(n.y(t))}}(this)}),this.label_options!=null?(o=this.h(0),p=function(){var n,r,i;for(i=[],n=0,r=f.length;n<r;n++)t=f[n],this.h(this.dx(t))-o>50&&i.push(t);return i}.call(this),this.labels_clip.bind(p,this.key),this.labels=this.labels_clip.inherit("text").options(this.label_options).update(),(n==="resize"?this.labels_clip.all:this.labels_clip["new"]).attr("height",this.dy),this.labels_clip.position({x:function(n){return function(t){return n.h(n.x(t))}}(this),y:this.y==null?0:function(n){return function(t,i){return n._v(n.y(t,i))}}(this),width:function(n){return function(t){return n.h(n.dx(t))-o}}(this)}),i=this,(n==="resize"?this.labels.all:this.labels["new"]).attr("y",i.dy/2),this.labels.position({x:function(n){var t,r;return e=i.x(n),s=i.dx(n),t=Math.max(e,i.h.domain()[0]),r=Math.min(e+s,i.h.domain()[1]),i.h((r-t)/2+(t-e))-o}})):c3.select(this.g,"g.labels").all.remove(),n==="resize"&&(!this.rects["new"].empty()||this.labels!=null&&!this.labels["new"].empty())?this._style(!0):void 0},r.prototype._style=function(n){var t;return r.__super__._style.apply(this,arguments),this.rects.style(n),(t=this.labels)!=null?t.style(n):void 0},r}(c3.Plot.Layer.Swimlane);c3.Plot.Layer.Swimlane.Flamechart=function(i){function r(){return this._update=n(this._update,this),this._init=n(this._init,this),r.__super__.constructor.apply(this,arguments)}return t(r,i),r.version=.1,r.prototype.type="flamechart",r.prototype._init=function(){if(r.__super__._init.apply(this,arguments),this.key==null)throw Error("`key()` accessor function is required for Flamechart layers");if(this.dy==null)throw Error("`dy` option is required for Flamechart layers");if(this.y!=null)throw Error("`y` option cannot be defined for Flamechart layers");return this.y=function(n){return function(t){return n.depths[n.key(t)]}}(this),this.depths={}},r.prototype._update=function(n){var i,u,o,f,t,s,e,h;for(r.__super__._update.apply(this,arguments),i=this.current_data.slice(0),c3.array.sort_up(i,this.x),f=0,t=[],e=0,h=i.length;e<h;e++){for(u=i[e],o={x:this.x(u),dx:this.dx(u)};t.length&&o.x>=(s=t[t.length-1]).x+s.dx;)t.length--;t.push(o);f=Math.max(f,t.length-1);this.depths[this.key(u)]=t.length-1}return this.v.domain([0,f]),c3.Plot.Layer.Swimlane.prototype._update.call(this,n)},r}(c3.Plot.Layer.Swimlane.Segment);c3.Plot.Layer.Swimlane.Sampled=function(i){function r(){return this._sample=n(this._sample,this),this._update=n(this._update,this),this._hover_datum=n(this._hover_datum,this),r.__super__.constructor.apply(this,arguments)}return t(r,i),r.version=0,r.prototype.type="sampled",r.prototype.dx=null,r.prototype.filter=void 0,r.prototype.safe=!0,r.prototype._hover_datum=function(n,t){var r,u,i,f;return r=this.swimlane_data[t],f=this.h.invert(this.h(n)+1),i=d3.bisector(this.x).right(r,n)-1,i<0?[null,null]:n<this.x(u=r[i])+this.dx(u)?[u,i]:++i<r.length&&this.x(u=r[i])<=f?[u,i]:[null,null]},r.prototype._update=function(){var v,y,f,t,n,p,i,o,e,w,b,s,u,h,c,l,a;for(r.__super__._update.apply(this,arguments),this.swimlane_data=[],n=i=s=this.v.domain()[0],u=this.v.domain()[1];s<=u?i<u:i>u;n=s<=u?++i:--i)this.swimlane_data[n]=[];for(h=this.v.domain(),p=h[0],v=h[1],c=this.data,t=o=0,w=c.length;o<w;t=++o)(f=c[t],this.filter==null||this.filter(f,t))&&(n=this.y(f,t),p<=n&&n<v&&this.swimlane_data[n].push(f));if(this.safe){for(l=this.swimlane_data,a=[],e=0,b=l.length;e<b;e++)y=l[e],a.push(c3.array.sort_up(y,this.x));return a}},r.prototype._sample=function(n){var a,i,o,h,u,r,t,s,v,c,f,l,e;for(a=d3.bisector(this.x).right,s=f=l=this.v.domain()[0],e=this.v.domain()[1];l<=e?f<e:f>e;s=l<=e?++f:--f)if(v=this._v(s),i=this.swimlane_data[s],i.length)for(t=a(i,this.h.domain()[0]),t?(t--,r=this.h(this.x(this.data[t])+this.dx(this.data[t]))>0?0:Math.round(this.h(this.x(i[t])))):r=Math.round(this.h(this.x(this.data[t])));r<this.width;){for(c=this.h.invert(r),u=t;u<i.length;){if(o=i[u],t=u,(h=this.x(o))>c){r=Math.round(this.h(h));break}if(c<=h+this.dx(o))break;u++}if(u===i.length)break;n(r,v,o);r++}},r}(c3.Plot.Layer.Swimlane);c3.Plot.Layer.Swimlane.Sampled.SVG=function(i){function r(){return this._style=n(this._style,this),this._draw=n(this._draw,this),r.__super__.constructor.apply(this,arguments)}return t(r,i),r.version=0,r.prototype.type="svg",r.prototype.line_options=void 0,r.prototype._draw=function(){var t,n;return r.__super__._draw.apply(this,arguments),t=[],n=[],this._sample(function(i,r,u){return t.push(u),n.push({x:i,y:r})}),this.lines=c3.select(this.g,"line").options(this.line_options).bind(t).update(),this.lines.position({x1:function(t,i){return n[i].x+.5},x2:function(t,i){return n[i].x+.5},y1:this.y==null?0:function(t,i){return n[i].y-.5},y2:this.y==null?this.height:function(t){return function(i,r){return n[r].y+t.dy-.5}}(this)})},r.prototype._style=function(){return r.__super__._style.apply(this,arguments),this.lines.style()},r}(c3.Plot.Layer.Swimlane.Sampled);c3.Plot.Layer.Swimlane.Sampled.Canvas=function(i){function r(){return this.zoom=n(this.zoom,this),this._style=n(this._style,this),this._draw=n(this._draw,this),this.__draw=n(this.__draw,this),this._size=n(this._size,this),this._init=n(this._init,this),r.__super__.constructor.apply(this,arguments)}return t(r,i),r.version=0,r.prototype.type="canvas",r.prototype.line_options=void 0,r.prototype._init=function(){var n;return r.__super__._init.apply(this,arguments),n=c3.select(this.g,"foreignObject").singleton().position({height:"100%",width:"100%"}),this.canvas=n.select("xhtml|canvas").singleton()},r.prototype._size=function(){return r.__super__._size.apply(this,arguments),this.canvas.position({height:this.height,width:this.width})},r.prototype.__draw=function(){var n,t,i,r;return n=this.canvas.node().getContext("2d"),n.clearRect(0,0,this.width,this.height),n.translate(.5,.5),t=c3.functor((i=this.line_options)!=null?(r=i.styles)!=null?r.stroke:void 0:void 0),this._sample(function(i){return function(r,u,f){return n.beginPath(),n.moveTo(r,u),n.lineTo(r,u+i.dy),n.strokeStyle=t(f),n.stroke()}}(this)),n.translate(-.5,-.5)},r.prototype._draw=function(n){return r.__super__._draw.apply(this,arguments),this.__draw(n)},r.prototype._style=function(n){return r.__super__._style.apply(this,arguments),n?void 0:this.__draw("restyle")},r.prototype.zoom=function(){return this.__draw("zoom")},r}(c3.Plot.Layer.Swimlane.Sampled)}).call(this);