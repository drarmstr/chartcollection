(function(){var n,t=function(n,t){return function(){return n.apply(t,arguments)}},i=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1},r=[].slice,u={}.hasOwnProperty,f=function(n,t){function r(){this.constructor=n}for(var i in t)u.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n};if(n=function(){function n(){}return n.version="0.1",n.select=function(t,i,r,u){return new n.Selection(t,i,r,u)},n}(),this.c3=n,typeof d3=="undefined"||d3===null)throw Error("D3 library is required for C3");n.util=function(){function n(){}return n.extend=function(n,t){var i,r;if(t!=null){for(i in t)r=t[i],n[i]=r;return n}},n.defaults=function(n,t){var i,r;if(t!=null){for(i in t)r=t[i],n[i]==null&&(n[i]=r);return n}},n.spin=function(n){for(var t=new Date;new Date-t<n;)null},n}();n.array=function(){function t(){}return t.remove_item=function(n,t){return n.splice(n.indexOf(t),1)},t.sort_up=function(n,t){return t==null&&(t=function(n){return n}),typeof crossfilter!="undefined"&&crossfilter!==null?(crossfilter.quicksort.by(t)(n,0,n.length),n):n.sort(function(n,i){return t(n)-t(i)})},t.sort_down=function(t,i){return typeof crossfilter!="undefined"&&crossfilter!==null?(n.array.sort_up(t,function(n){return-i(n)}),t):t.sort(function(n,t){return i(t)-i(n)})},t}();n.http=function(){function t(){}return t.deparam=function(n,t){var e,u,i,r,o,f;if(!n)return t?null:{};for(u={},f=n.split("&"),r=0,o=f.length;r<o;r++){if(e=f[r],i=e.split("="),i[0]===t)return i[1]!=null?i[1]:"";u[i[0]]=i[1]}return t?null:u},t.deparam_query=function(t){return n.http.deparam(document.location.search.slice(1),t)},t}();n.html=function(){function r(){}var n,t,i;return n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;",",":"&#44;"},i="["+function(){var i=[];for(t in n)i.push(t);return i}()+"]",r.escape=function(t){return String(t).replace(RegExp(i,"g"),function(t){return n[t]})},r}();n.d3=function(){function n(){}return n.set_range=function(n,t){var i;return t[0]===0&&t[1]===0&&(t=[0,1]),(i=n!=null?typeof n.rangePoints=="function"?n.rangePoints(t):void 0:void 0)!=null?i:n!=null?n.range(t):void 0},n}();n.functor=function(n){return typeof n=="function"?n:function(){return n}};n.Selection=function(){function n(){}return n}();n.Selection.Options=function(){function n(){}return n.prototype["class"]=void 0,n.prototype.classes=void 0,n.prototype.styles=void 0,n.prototype.events=void 0,n.prototype.text=void 0,n.prototype.html=void 0,n.prototype.title=void 0,n.prototype.animate=void 0,n.prototype.duration=void 0,n.prototype.animate_old=void 0,n}();n.Selection=function(){function r(n,r,u,f){var e,o,s;n==null&&(n=d3.select());this.query=r;this.before=u;this.node=t(this.node,this);this.style=t(this.style,this);this.position_tweens=t(this.position_tweens,this);this.position=t(this.position,this);this.update=t(this.update,this);this.remove=t(this.remove,this);this.bind=t(this.bind,this);this.singleton=t(this.singleton,this);this.inherit=t(this.inherit,this);this.query?(i.call(this.query,"|")>=0&&(e=this.query.split("|"),this.namespace=e[0],this.query=e[1]),o=this.query.split(" ").slice(-1)[0].split(/\.(.+)/),this.tag=o[0],this._query_class=o[1],this.namespace&&(this.tag=this.namespace+":"+this.tag),this._query_class=(s=this._query_class)!=null?s.replace("."," "):void 0,n!=null&&(this.all=n.selectAll(this.query),f&&(this.all=this.all.filter(function(){return n.some(function(n){return function(t){var r;return r=n.parentNode,i.call(t,r)>=0}}(this))})))):this.all=n}return r.prototype.all=d3.select(),r.prototype["new"]=d3.select(),r.prototype.old=d3.select(),r.prototype.opt={},r.prototype.opt_array=void 0,r.prototype.select=function(t,i,r){return new n.Selection(this.all,t,i,r)},r.prototype.inherit=function(t,i,r){var u;return i==null&&(i=!0),r==null&&(r=!1),u=new n.Selection(null,t),i&&(u["new"]=this["new"].insert(u.tag,r?":first-child":null),u._query_class!=null&&u["new"].classed(u._query_class,!0)),u.all=this.all.select(t),u.old=this.old.select(t),u},r.prototype.singleton=function(n){return this.bind([n])},r.prototype.bind=function(n,t){var i,r;if(this.key=t,!this.tag)throw"Cannot bind() a selection that doesn't have a selection query set";return i=this._animate&&this.opt.duration&&((r=this.opt.styles)!=null?r.opacity:void 0)==null,this.all=this.all.data(n,this.key),i&&this.all.style("opacity",1).interrupt("binding"),this["new"]=this.all.enter().insert(this.tag,this.before),this.old=this.all.exit(),this._query_class!=null&&this["new"].classed(this._query_class,!0),i?(this["new"].style("opacity",0),this["new"].transition("binding").duration(this.opt.duration).style("opacity",1),this.old.transition("binding").duration(this.opt.duration).style("opacity",0).remove()):this.old.remove(),this},r.prototype.remove=function(){return this._animate?this.all.duration(this.opt.duration).style("opacity",0).remove():this.all.remove()},r.prototype.options=function(n,t){var i;return this.opt=n!=null?n:{},this.opt_accessor=t,(i=this.opt).duration==null&&(i.duration=750),this},r.prototype.animate=function(n){if(n==null&&(n=!0),this.opt==null)throw"Please call options() before animate()";return this._animate=n&&this.opt.animate,this},r.prototype.update=function(){var t,n,i;if(this.opt["class"]!=null&&this["new"].attr("class",this.opt["class"]),this._query_class!=null&&this["new"].classed(this._query_class,!0),this.opt.html!=null?this.all.html(this.opt.html):this.opt.text!=null&&this.all.text(this.opt.text),this.opt.title!=null&&(n=typeof this.opt.title=="function"?this.all:this["new"],this.all.node()instanceof SVGElement?(this["new"].append("title"),n.length<=1?n.select("title").text(this.opt.title):(i=this,n.each(function(n,t,r){return d3.select(this).selectAll("title").text(i.opt.title(n,t,r))}))):n.attr("title",this.opt.title)),this.opt.events!=null)this["new"].on(this.opt.events);return this.opt_accessor!=null&&(t=this.opt_accessor,this.all.each(function(n,i,r){var f,u,e;if(u=t(n,i,r)){if(f=d3.select(this),u.events!=null)f.on(u.events);if(u.title!=null&&(this instanceof SVGElement?(e=f.selectAll("title").data([n]),e.enter().append("title"),e.text(u.title)):f.attr("title",u.title)),u.html!=null)return f.html(u.html);if(u.text!=null)return f.text(u.text)}})),this},r.prototype.position=function(n){var t;return this._animate?(this["new"].attr(n),t=this.all.transition("position.attrs").duration(this.opt.duration)):t=this.all,t.attr(n),this._animate&&this.opt.animate_old&&this.old.transition("position.attrs").duration(this.opt.duration).attr(n),this},r.prototype.position_tweens=function(n){var t,i,r;i=this.all.transition("position.tweens").duration(this._animate?this.opt.duration:0);for(t in n)r=n[t],i.attrTween(t,r);if(this._animate&&this.opt.animate_old){i=this.old.transition("position.tweens").duration(this.opt.duration);for(t in n)r=n[t],i.attrTween(t,r)}return this},r.prototype.style=function(n){var i,t;return t=n&&this.key!=null?this["new"]:this.all,this.opt["class"]!=null&&typeof this.opt["class"]=="function"&&(t.attr("class",this.opt["class"]),this._query_class!=null&&t.classed(this._query_class,!0)),this.opt.classes!=null&&t.classed(this.opt.classes),this.opt.styles!=null&&t.style(this.opt.styles),this.opt_accessor!=null&&(i=this.opt_accessor,t.each(function(n,t,r){var f,u;if((u=i(n,t,r))&&(f=d3.select(this),u["class"]!=null&&f.classed(typeof u["class"]=="function"?u["class"](n,t,r):u["class"],!0),u.classes!=null&&f.classed(u.classes),u.styles!=null))return f.style(u.styles)})),this},r.prototype.node=function(){return this.all.node()},r}();n.Dispatch=function(){function n(){this.dispatcher={}}return n.prototype.on=function(n,t){var i,u,r;return r=n.split("."),n=r[0],i=r[1],(u=this.dispatcher)[n]==null&&(u[n]={}),t?this.dispatcher[n][i]=t:delete this.dispatcher[n][i]},n.prototype.trigger=function(){var t,i,u,n,f;if(i=arguments[0],t=2<=arguments.length?r.call(arguments,1):[],(n=this.dispatcher[i])!=null)for(f in n)u=n[f],u.apply(this,t)},n}();n.Base=function(){function i(i){this.restyle=t(this.restyle,this);this.redraw=t(this.redraw,this);this.resize=t(this.resize,this);this.render=t(this.render,this);n.util.extend(this,new n.Dispatch);n.util.extend(this,i)}return i.prototype.anchor=void 0,i.prototype.height=void 0,i.prototype.width=void 0,i.prototype.anchor_styles=void 0,i.prototype.handlers=void 0,i.prototype.render=function(t){return n.util.extend(this,t),this.trigger("render_start"),this.init(),this.trigger("render"),this.trigger("resize_start"),this.rendered?this.size():this.size(this.width,this.height),this.trigger("resize"),this.trigger("redraw_start","render"),this.update("render"),this.draw("render"),this.trigger("redraw","render"),this.trigger("restyle_start",!1),this.style(!0),this.trigger("restyle",!1),this.rendered=!0,this.trigger("rendered"),this},i.prototype.resize=function(n,t){if(this.rendered)return this.trigger("resize_start"),this.size(n,t),this.trigger("resize"),this.trigger("redraw_start","resize"),this.draw("resize"),this.trigger("redraw","resize"),this},i.prototype.redraw=function(n){return n==null&&(n="redraw"),this.rendered?(this.trigger("redraw_start",n),this.update(n),this.draw(n),this.trigger("redraw",n),this.trigger("restyle_start",!0),this.style(!0),this.trigger("restyle",!0),this):void 0},i.prototype.restyle=function(){if(this.rendered)return this.trigger("restyle_start",!1),this.style(!1),this.trigger("restyle",!1),this},i.prototype.init=function(){return this._prep(),this._init()},i.prototype._prep=function(){var u,n,t,f,i,r;if(u=this.anchor,this.anchor==null&&(this.anchor=document.createElement("div")),n=d3.select(this.anchor),this.anchor=n.node(),!this.anchor)throw"Unable to find anchor: "+u;if(this.anchor_styles!=null&&n.style(this.anchor_styles),this.handlers!=null){i=this.handlers;r=[];for(t in i)f=i[t],r.push(this.on(t,f));return r}},i.prototype._init=function(){},i.prototype.size=function(n,t){return n!=null&&(this.anchor.style.width=typeof n=="number"?n+"px":n),t!=null&&(this.anchor.style.height=typeof t=="number"?t+"px":t),this.width=this.anchor.offsetWidth,this.height=this.anchor.offsetHeight,this._size()},i.prototype._size=function(){},i.prototype.update=function(n){return this._update(n)},i.prototype._update=function(){},i.prototype.draw=function(n){return this._draw(n)},i.prototype._draw=function(){},i.prototype.style=function(n){return this._style(n)},i.prototype._style=function(){},i}();n.Chart=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return f(i,t),i.prototype.type="chart",i.prototype["class"]=void 0,i.prototype.options=void 0,i.prototype.content_options=void 0,i.prototype.init=function(){var t;this._prep();this.svg=n.select(d3.select(this.anchor),"svg",null,!0).singleton().options(this.options).update();this.svg.all.attr("class","c3 "+(this["class"]!=null?this["class"]:"")).attr("height","100%").attr("width","100%").on("contextmenu",function(){return d3.event.preventDefault()});for(this.content=this.svg.select("g.content",null,!0).singleton().options(this.content_options).update(),t=Object.getPrototypeOf(this);t;)t.type!=null&&(this.svg.all.classed(t.type,!0),this.content.all.classed(t.type,!0)),t=Object.getPrototypeOf(t);return this._init()},i.prototype.style=function(){return this.svg.style(),this.content.style(),i.__super__.style.apply(this,arguments)},i}(n.Base);document.addEventListener("DOMContentLoaded",function(){var i,u,t,r;if(!n.global_svg)return n.global_svg=d3.select("body").append("svg").attr("class","c3 global"),n.global_defs=n.global_svg.append("defs"),t=n.global_defs.append("filter").attr("id","shadow_filter"),t.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",4),t.append("feSpecularLighting").attr("specularExponent",100).attr("lighting-color","wheat").append("feSpotLight").attr("x",0).attr("y",0).attr("z",200),t.append("feComposite").attr("in2","SourceGraphic").attr("operator","in"),t.append("feComposite").attr("in2","SourceGraphic").attr("operator","arithmetic").attr("k1",0).attr("k2",1).attr("k3",1).attr("k4",0),r=n.global_defs.append("linearGradient").attr("id","gradient_for_mask_fade_right"),r.append("stop").attr("offset",.5).attr("stop-color","white").attr("stop-opacity",1),r.append("stop").attr("offset",.9).attr("stop-color","white").attr("stop-opacity",0),i=n.global_defs.append("linearGradient").attr("id","gradient_for_mask_fade_left"),i.append("stop").attr("offset",.1).attr("stop-color","white").attr("stop-opacity",0),i.append("stop").attr("offset",.5).attr("stop-color","white").attr("stop-opacity",1),u=n.global_defs.append("mask").attr("id","mask_fade_right").attr("maskContentUnits","objectBoundingBox").attr("x",-1).attr("y",-5e5).attr("height",1e6).attr("width",2).append("rect").attr("x",-1).attr("y",-5e5).attr("height",1e6).attr("width",2).attr("fill","url(#"+r.attr("id")+")"),n.global_defs.append("mask").attr("id","mask_fade_left").attr("maskContentUnits","objectBoundingBox").attr("y",-5e5).attr("height",1e6).attr("width",2).append("rect").attr("y",-5e5).attr("height",1e6).attr("width",2).attr("fill","url(#"+i.attr("id")+")")})}).call(this);